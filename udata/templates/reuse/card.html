{% cache cache_duration, 'reuse-card', reuse.id|string, g.lang_code %}
{% set features = features or [] %}
<div class="card reuse-card {% if 'preview' in features %}card--with-cover{% endif %}">
    {% if 'preview' in features %}
    <div class="card__cover">
        <a href="{{ url_for('reuses.show', reuse=reuse) }}">
            <img class="media-object img-responsive" alt="{{ reuse.title }}"
                src="{{ reuse.image|placeholder('reuse') }}">
        </a>
    </div>
    {% else %}
    <a class="card-logo" href="{{ url_for('reuses.show', reuse=reuse) }}">
        <img alt=""
            src="{{ reuse.image(86)|placeholder('reuse') }}"
            width="86" height="86">
    </a>
    {% endif %}

    <div class="card-body">
        <h4>
            <a href="{{ url_for('reuses.show', reuse=reuse) }}" title="{{ reuse.title }}">
                {{ reuse.title }}
            </a>
        </h4>

        <div class="clamp-3">{{ reuse.description|mdstrip(180) }}</div>
    </div>

    <footer class="card__footer">
        <ul>
            <li v-tooltip title="{{ _('Type') }}">
                <span class="fa fa-file fa-fw"></span>
                {{ reuse.type_label }}
            </li>
            <li v-tooltip title="{{ _('Number of datasets used') }}">
                <span class="fa fa-cubes fa-fw"></span>
                {{ reuse.datasets|length or 0 }}
            </li>

            <li v-tooltip title="{{ _('Stars') }}">
                <span class="fa fa-star fa-fw"></span>
                {{ reuse.metrics.followers or 0 }}
            </li>

            <li v-tooltip title="{{ _('Published on %(date)s',
                date=reuse.created_at|dateformat(format='long')) }}">
                <span class="fa fa-calendar fa-fw"></span>
                {{ reuse.created_at|dateformat(format='YYYY') }}
            </li>

            {% if 'preview' in features %}
            <li v-tooltip title="{{ _('Created by %(user)s', user=owner_name(reuse)) }}">
                <span class="fa fa-user fa-fw"></span>
                {{ _('by %(user)s', user=owner_name(reuse)) }}
            </li>
            {% endif %}
        </ul>
    </footer>
</div>
{% endcache %}
