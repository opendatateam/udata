{% cache cache_duration, 'reuse-card', reuse.id|string, g.lang_code %}
{% set features = features or [] %}
<div class="card reuse-card {% if 'preview' in features %}card--with-cover{% endif %}">
    {% if 'preview' in features %}
    <div class="card__cover">
        <a href="{{ url_for('reuses.show', reuse=reuse) }}">
            <img class="media-object img-responsive" alt="{{ reuse.title }}"
                src="{{ reuse.image|placeholder('reuse') }}">
        </a>
    </div>
    {% else %}
    <a class="card-logo" href="{{ url_for('reuses.show', reuse=reuse) }}">
        <img alt=""
            src="{{ reuse.image(86)|placeholder('reuse') }}"
            width="86" height="86">
    </a>
    {% endif %}

    <div class="card-body">
        <h4>
            <a href="{{ url_for('reuses.show', reuse=reuse) }}" title="{{ reuse.title }}">
                {{ reuse.title }}
            </a>
        </h4>

        <div class="clamp-3">{{ reuse.description|mdstrip(180) }}</div>
    </div>

    <footer>
        <ul>
            <li>
                <a class="btn btn-xs" v-tooltip title="{{ _('Type') }}">
                    <span class="fa fa-file fa-fw"></span>
                    {{ reuse.type_label }}
                </a>
            </li>
            <li>
                <a class="btn btn-xs" v-tooltip title="{{ _('Number of datasets used') }}">
                    <span class="fa fa-cubes fa-fw"></span>
                    {{ reuse.datasets|length or 0 }}
                </a>
            </li>

            <li>
                <a class="btn btn-xs" v-tooltip title="{{ _('Stars') }}">
                    <span class="fa fa-star fa-fw"></span>
                    {{ reuse.metrics.followers or 0 }}
                </a>
            </li>
        </ul>
    </footer>
</div>
{% endcache %}
