{% cache cache_duration, 'dataset-card', dataset.id|string, g.lang_code %}
{% from theme('macros/certified.html') import badge_if_certified with context %}

<article class="dataset-card">
    {% if dataset.organization %}
    <div class="card-logo">
        <img src="{{ dataset.organization.logo(100, external=True)|placeholder('organization', external=True) }}"
            alt="{{ dataset.organization.name }}" />
        <div class="logo-badge">
            {% if dataset.private %}
            {% include theme('svg/private.svg') %}
            {% else %}
            {{ badge_if_certified(dataset.organization) }}
            {% endif %}
        </div>
    </div>
    {% elif dataset.owner %}
    <div class="card-logo">
        <img src="{{ dataset.owner.avatar(100)|placeholder('user') }}" alt="{{ dataset.owner.fullname }}" />
    </div>
    {% else %}
    <div class="card-logo">
        <img src="{{ ''|placeholder('organization', external=True) }}" alt="" />
    </div>
    {% endif %}
    <div class="card-data">
        <h4 class="card-body">
            {{ dataset.full_title }}
        </h4>
        <div class="card-footer">
            <ul class="card-features text-grey-300 fs-xs">
                <li>{{ dataset.resources | length  }} {{ _('@@ressources') }}</li>
                <li>{{ dataset.metrics.reuses or 0 }} {{ _('@@r√©utilisations') }}</li>
            </ul>
        </div>
    </div>
</article>

{% endcache %}
